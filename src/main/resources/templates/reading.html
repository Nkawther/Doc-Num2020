<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/entete.css" />
    <link rel="stylesheet" href="/css/header.css" />
    <title>[[ ${pageName}]]</title>
  </head>

  <body>
    <header th:replace="/entete :: my_entete"></header>
    <div class="listmsg">
      <h2>List XML file</h2>
      <hr>
      <ul id="lsfile">
        <li data-th-each="num,info : ${lsHeader}"> 
          Receiver name : <span th:id="${num.idReceiver}"></span><br>
          Transmitter name : <span th:id="${num.idTransmitter}"></span><br>
          number of message : [[ ${num.nbMsg} ]]<br>
          Reference authorization : [[ ${num.authRef} ]]<br>
          Date authorization : [[ ${num.authDate} ]]<br>
          <a data-th-href="@{xml-file(ind=${num.id})}">Generate an xml file</a>
        </li>
    </ul>
  </div>
  <script th:inline="javascript">
    /*<![CDATA[*/
    var lsUsername = /*[[${lsUsername}]]*/ 'default';
    console.log(lsUsername);

    lsfile = document.getElementById("lsfile").getElementsByTagName("li");
    console.log(lsfile);
    lsUsername.forEach(Element => {
      console.log(Element.id);
      //console.log(document.getElementById(Element.id).id);
      if(document.getElementById(Element.id) != null){
        console.log("dans if");      
        document.getElementById(Element.id).append(Element.name);
      }
    });
    
    /*]]>*/
  </script>
  </body>

</html>